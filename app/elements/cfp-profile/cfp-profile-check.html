<link rel="import" href="../../bower_components/polymer/polymer.html">
<link rel="import" href="../../bower_components/paper-styles/typography.html">
<link rel="import" href="../../bower_components/paper-material/paper-material.html">
<link rel="import" href="../../bower_components/iron-icons/iron-icons.html">
<link rel="import" href="../../bower_components/paper-fab/paper-fab.html">
<link rel="import" href="../../bower_components/paper-dropdown-menu/paper-dropdown-menu.html">
<link rel="import" href="../../bower_components/paper-listbox/paper-listbox.html">
<link rel="import" href="../../bower_components/paper-item/paper-item.html">
<link rel="import" href="../../styles/app-theme.html">
<link rel="import" href="../../styles/shared-styles.html">

<script src="../../bower_components/page/page.js"></script>

<dom-module id="cfp-profile-check">
  <template>
    <firebase-document data="{{_profile}}" path="[[_getProfilePath(userId)]]"></firebase-document>
  </template>

  <script>
    (function() {
      'use strict';

      Polymer({
        is: 'cfp-profile-check',

        properties: {
          userId: {
            type: String,
            notify: true
          },
          _profile: {
            type: Object,
            notify: true
          }
       },
        observers: [
          '_checkProfile(userId, _profile)'
        ],
        _checkProfile: function(userId, _profile) {
          console.log('checking profile');
          console.log(userId);
          console.log(_profile);
          if (userId && _profile) {
            if (!_profile.bio || !_profile.firstName || !_profile.email || !_profile.displayName) {
              this.fire('profile-empty');
            }
          }
        },
        _getProfilePath: function(userId) {
          console.log('/profile/' + userId);
          return '/profile/' + userId;
        }
      });
    })();
  </script>
</dom-module>
